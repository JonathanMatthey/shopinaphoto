
var tm;if(!tm)tm={};tm.jq=function(){return(typeof jQuery=='function')?jQuery:null;}
tm.updateClock=function(dateFormat){var currentTime=new Date();if(dateFormat&&dateFormat=="HH:MM:tt dd MMM YYYY"){currentTimeString="updated "+currentTime.format('HH:MMtt dd mmmm yyyy');}else{currentTimeString=currentTime.format('dd mmmm yyyy: HH:MMtt ');}
$("#clock").html(currentTimeString);};tm.teaserBlocks={teasersToBlock:new Array(),blockThis:function(objectId){this.teasersToBlock[this.teasersToBlock.length]=objectId;tm.logger.debug(['tm.teaserBlocks: blocking ',objectId]);},removeBlockedPicTeasers:function(storyListDiv){var objectIds=this.teasersToBlock;if(!objectIds){return;}
var bigTeaser1=$(storyListDiv).find('.sli1').get(0);if(!bigTeaser1){return;}
var dpObjRegExp=new RegExp('^slo([0-9]+)(bt|itb)(S?).*o('+
objectIds.join('|')+')$');var sliBits=bigTeaser1.className.match(dpObjRegExp);if(!sliBits){return;}
tm.logger.debug(['tm.teaserBlocks: found',bigTeaser1,'in',storyListDiv,'for',objectIds]);var plainArticles=new Array();var teaserArticles=$('div.slo'+sliBits[1]+'bt'+sliBits[3]);if(teaserArticles.length>1&&teaserArticles[teaserArticles.length-1].style.display=='none'){teaserArticles[0].style.display='none';teaserArticles[teaserArticles.length-1].style.display='';plainArticles=$('li.slo'+sliBits[1]+'itb'+sliBits[3]);}
if(teaserArticles.length==0){plainArticles=$('li.slo'+sliBits[1]+'itb'+sliBits[3]);}
if(plainArticles.length>1){plainArticles[0].style.display='none';if(plainArticles[plainArticles.length-1].style.display=='none'){plainArticles[plainArticles.length-1].style.display='';}}}};if(!tm.jq()){delete tm.teaserBlocks;}
(function(){var adclass=function(){if(!document.getElementById||!document.getElementsByTagName)return;var adContainer=document.getElementById('top-search-ad-wrapper');if(!adContainer)return;var c=adContainer.className;var elTypes=['A','OBJECT','DIV','IMG','IFRAME'];for(var i=0;i<elTypes.length;i++){var els=adContainer.getElementsByTagName(elTypes[i]);for(var j=0;j<els.length;j++){w=els[j].offsetWidth;if(typeof w=='undefined')return;if(w>700){adContainer.className=c+' '+'top-leaderboard';return;}}}
adContainer.className=c+' '+'top-banner';}
if(window.addEventListener){window.addEventListener('load',adclass,false);}else if(window.attachEvent){window.attachEvent('onload',adclass);}})();function tmgDeferHTML(){this.deferred=new Object();this.useDeferred=((window.addEventListener||window.attachEvent)&&document.getElementById&&!document.all);this.lastkey=0;this.idPrefix='tmgdfc-';}
tmgDeferHTML.prototype.defer=function(html){if(!this.useDeferred){document.write(html);return;}
this.lastkey++;key='k'+this.lastkey;this.deferred[key]=html;document.write('<div style="display:none" id="'+this.idPrefix+key+'"></div>');};tmgDeferHTML.prototype.loadDeferred=function(){for(key in this.deferred){var rendered=document.getElementById(this.idPrefix+'r'+key);var target=document.getElementById(this.idPrefix+key);if(rendered==null){continue;}
rendered.style.display='block';target.parentNode.replaceChild(rendered,target);}};tmgDeferHTML.prototype.renderDeferred=function(){for(var key in this.deferred){document.write('<div style="display:none" id="'+this.idPrefix+'r'+key+'">');try{document.write(this.deferred[key]);}catch(ex){}
document.write('<\/div>');}
var t=this;var l=function(){t.loadDeferred();}
if(window.addEventListener){window.addEventListener('load',l,false);}else{window.attachEvent('onload',l);}};tm.defer=new tmgDeferHTML();tm.getCookieVal=function(key){var pos=document.cookie.indexOf(key+"=");if(pos!=-1){var start=pos+key.length+1;var end=document.cookie.indexOf(";",start);if(end==-1)end=document.cookie.length;var value=document.cookie.substring(start,end);return unescape(value);}
return null;};tm.setCookieVal=function(key,value,duration_sec,path){var theCookie=key+"="+escape(value);if(duration_sec&&duration_sec>0){var exp=new Date();exp.setTime(exp.getTime()+(duration_sec*1000));theCookie+='; expires='+exp.toGMTString();}
if(path){theCookie+=';path='+path;}
document.cookie=theCookie;};(function(){var COOKIE_NAME='tmg-vis';var DURATION_SEC=10*365*24*60*60;if(tm.getCookieVal(COOKIE_NAME)){return;}
tm.setCookieVal(COOKIE_NAME,new Date().getTime(),DURATION_SEC,'/');})();tm.arrayShuffle=function(myArray){var i=myArray.length;if(i==0)return false;while(--i){var j=Math.floor(Math.random()*(i+1));var tempi=myArray[i];var tempj=myArray[j];myArray[i]=tempj;myArray[j]=tempi;}
return myArray;}
tm.logger={};tm.logger.debugLevel=document.location.search.replace(/.*(log|debug)=([0-9]+).*/,'$2');tm.logger.enabled=tm.logger.debugLevel!='';tm.logger.error=function(msg,level){if(tm.logger.enabled&&typeof console!='undefined'&&typeof console.error!='undefined'&&(tm.logger.debugLevel==1||level==tm.logger.debugLevel)){if(msg instanceof Array){console.error.apply(console,msg);}else{console.error(msg);}}}
tm.logger.info=function(msg,level){if(tm.logger.enabled&&typeof console!='undefined'&&typeof console.info!='undefined'&&(tm.logger.debugLevel==1||level==tm.logger.debugLevel)){if(msg instanceof Array){console.info.apply(console,msg);}else{console.info(msg);}}}
tm.logger.debug=function(msg,level){if(tm.logger.enabled&&typeof console!='undefined'&&typeof console.debug!='undefined'&&(tm.logger.debugLevel==1||level==tm.logger.debugLevel)){if(msg instanceof Array){console.debug.apply(console,msg);}else{console.debug(msg);}}}
tm.logger.log=function(level,packageName,args){if(!tm.logger.enabled){return;}
var argsProper=[packageName+': '];for(var i=1;i<args.length;i++){argsProper[i]=args[i];}
switch(level){case'debug':tm.logger.debug(argsProper);break;case'info':tm.logger.info(argsProper);break;case'error':tm.logger.error(argsProper);break;}}
tm.isElementEmpty=function(el){for(var e=0;e<el.childNodes.length;e++){if(el.childNodes[e].nodeName=='#text'){if(el.childNodes[e].data.replace(/^\s*|\s*$/g,'')!=''){return false;}}else if(el.childNodes[e].nodeName!='#comment'){return false;}}
return true;}
tm.removeUnwantedDivs=function(removeRule,force){this.LOG_LVL=67;if(!tm.jq()){return;}
if(tm.disableUnwantedDivRemoval&&!force){tm.logger.info('tm.removeUnwantedDivs: disabled',this.LOG_LVL);return;}
var allDivs=$('DIV');var aParent=null;removeRule=removeRule?removeRule:'span-[0-9]+.*';if(tm.unwantedDivNames&&tm.unwantedDivNames.length){removeRule=removeRule+'|'+tm.unwantedDivNames.toString().replace(/,/g,'|');}
removeRule=removeRule.replace(/^\||\|$/g,'').replace(/\|+/g,'|');tm.logger.info(['tm.removeUnwantedDivs: with className or id matching:',removeRule],this.LOG_LVL);var removeRuleRegExp=RegExp('^('+removeRule+')$');for(var d=0;d<allDivs.length;d++){if(tm.isElementEmpty(allDivs[d])&&(allDivs[d].className.match(removeRuleRegExp)||allDivs[d].id.match(removeRuleRegExp))){aParent=allDivs[d].parentNode;tm.logger.debug(['tm.removeUnwantedDivs: removed',aParent.removeChild(allDivs[d]),'from',aParent],this.LOG_LVL);}}}
$(function(){tm.removeUnwantedDivs('ad0.*',true);$('.ad0').css('display','block');});tm.urls={};tm.urls.parseSection=function(url){var sect=url.replace(new RegExp('^.*//'+document.location.host),'');sect=sect.replace(/[a-z]+\.cfm.*$/,'');sect=sect.replace(/\/tm_[^\/]*\-name_[^\/]*\.(js|xml|html|nocache)$/,'/');sect=sect.replace(/\/[0-9]{4}\/[0-9]{2}\/.*$/,'/');return sect;};if(tm.jq()){$(function(){$('span.popup-info').each(function(){var distance=10;var time=250;var hideDelay=500;var detectPosition=function(targetEl){}
var hideDelayTimer=null;var beingShown=false;var shown=false;var trigger=$('.popup-trigger',this);var msg=$('.popup-message',this);var popup=$('.popup-popup',this).css('opacity',0);$([trigger.get(0),popup.get(0)]).mouseover(function(){if(hideDelayTimer)clearTimeout(hideDelayTimer);if(beingShown||shown){return;}else{beingShown=true;popup.css({display:'block',opacity:0});popup.css({top:(-popup.height()),left:-20})
popup.animate({top:'-='+distance+'px',opacity:1},time,'swing',function(){beingShown=false;shown=true;if($.support.opacity){msg.dropShadow({opacity:0.6,left:0,top:0,blur:3});}});}}).mouseout(function(){if(hideDelayTimer)clearTimeout(hideDelayTimer);hideDelayTimer=setTimeout(function(){hideDelayTimer=null;popup.animate({top:'-='+distance+'px',opacity:0},time,'swing',function(){shown=false;popup.css('display','none');if($.support.opacity){msg.removeShadow();}});},hideDelay);});});});$(function(){$('.article.main .pagination a').each(function(){var pageURL=this.href;var fullHost='//'+document.location.host;if(pageURL.indexOf(fullHost)==-1){return;}
var pageSect=tm.urls.parseSection(pageURL);var documentSect=tm.urls.parseSection(document.location.href);if(documentSect==pageSect||!pageSect){return;}
this.href=pageURL.replace(new RegExp(fullHost+pageSect),fullHost+documentSect);tm.logger.debug('tm.urls article pagination: '+pageURL+' -> '+this.href);})});}
tm.display={};tm.display.switchTab=function(allTabContent,allTabs,tabContent2show,selectedTab,selectedClass){$(allTabContent).css('display','none');$(tabContent2show).css('display','');$(allTabs).removeClass(selectedClass);$(selectedTab).addClass(selectedClass);}
var dateFormat=function(){var token=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,timezone=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,timezoneClip=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len)val="0"+val;return val;};return function(date,mask,utc){var dF=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;date=undefined;}
date=date?new Date(date):new Date;if(isNaN(date))throw SyntaxError("invalid date");mask=String(dF.masks[mask]||mask||dF.masks["default"]);if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true;}
var _=utc?"getUTC":"get",d=date[_+"Date"](),D=date[_+"Day"](),m=date[_+"Month"](),y=date[_+"FullYear"](),H=date[_+"Hours"](),M=date[_+"Minutes"](),s=date[_+"Seconds"](),L=date[_+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),flags={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(timezone)||[""]).pop().replace(timezoneClip,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(token,function($0){return $0 in flags?flags[$0]:$0.slice(1,$0.length-1);});};}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};dateFormat.daysInMonth=function(iMonth,iYear){return 32-new Date(iYear,iMonth,32).getDate();}
Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc);};tm.pause=function(millis){var date=new Date();var curDate=null;do{curDate=new Date();}while(curDate-date<millis);}
String.prototype.pad=function(length,character,padAtEnd){if(!length){return this;}
character=character?character:' ';var str=this;while(str.length<length){if(padAtEnd){str=str+character;}else{str=character+str;}}
return str;}
Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}
return-1;}
Array.prototype.has=function(obj){return this.indexOf(obj)>=0;}
tm.jqPluginLoader={LOG_LVL:0,INIT_TEST_DELAY:50,MAX_INIT_TEST_DELAY:3000,loadedScripts:{},load:function(data){var debugPreFix='jqPluginLoader.load('+data.url.split('/').pop()+'...):';function _dependentLoaded(){if(data.dependents){for(var d=0;d<data.dependents.length;d++){if(!tm.jqPluginLoader.loadedScripts[data.dependents[d]]){return;}}}
data.dependents=null;tm.logger.debug([debugPreFix,'Loaded Dependents, loading plugin',data],tm.jqPluginLoader.LOG_LVL);tm.jqPluginLoader.load(data);}
function triggerCallBack(callBack,test,delay){if(!delay){delay=0;}
if(!test||typeof $[test]!='undefined'||delay>=tm.jqPluginLoader.MAX_INIT_TEST_DELAY){tm.logger.debug([debugPreFix,'Triggering Callback ',callBack],tm.jqPluginLoader.LOG_LVL);callBack();return;}else{tm.logger.debug([debugPreFix,'Waiting for '+
tm.jqPluginLoader.INIT_TEST_DELAY+'ms for $.'+test],tm.jqPluginLoader.LOG_LVL);setTimeout(function(){triggerCallBack(callBack,test,delay+tm.jqPluginLoader.INIT_TEST_DELAY)},tm.jqPluginLoader.INIT_TEST_DELAY);}}
if(data.initTest&&(typeof $[data.initTest]!='undefined'||typeof $('')[data.initTest]!='undefined')){tm.jqPluginLoader.loadedScripts[data.url]=true;}
if(tm.jqPluginLoader.loadedScripts[data.url]){if(typeof data.callBack=="function"){tm.logger.debug([debugPreFix,'Plugin already loaded, triggering callBack',data.callBack,data],tm.jqPluginLoader.LOG_LVL);triggerCallBack(data.callBack,data.initTest?data.initTest:null);}else{tm.logger.debug([debugPreFix,'Plugin already loaded, NO callBack',data],tm.jqPluginLoader.LOG_LVL);}
return;}
if(typeof data.dependents=='object'&&data.dependents!=null){var _dependents=data.dependents;tm.logger.debug([debugPreFix,'Loading dependents',_dependents],tm.jqPluginLoader.LOG_LVL);for(var d=0;d<_dependents.length;d++){tm.jqPluginLoader.load({url:_dependents[d],callBack:function(){tm.jqPluginLoader.loadedScripts[_dependents[d]]=true;_dependentLoaded();}});}}else{tm.logger.debug([debugPreFix,'No dependents to Load',data],tm.jqPluginLoader.LOG_LVL);tm.jqPluginLoader.loadedScripts[data.url]=true;$.ajax({url:data.url,dataType:'script',async:true,cache:true,success:function(){tm.logger.debug([debugPreFix,'Loaded '+data.url],tm.jqPluginLoader.LOG_LVL);if(typeof data.callBack=="function"){triggerCallBack(data.callBack,data.initTest?data.initTest:null);}},error:function(){tm.jqPluginLoader.loadedScripts[data.url]=false;}});}}}
tm.nextTileValue=function(){tm.tileValue=(typeof tm.tileValue==='undefined')?1:tm.tileValue+1;return tm.tileValue;};